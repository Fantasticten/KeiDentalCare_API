<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Create Doctor</title>
  </head>
  <body>
    <h1>Create New Doctor</h1>
    <form id="doctorForm" enctype="multipart/form-data">
      <label for="nama_dokter">Nama Dokter:</label><br />
      <input
        type="text"
        id="nama_dokter"
        name="nama_dokter"
        required
      /><br /><br />

      <label for="spesialisasi">Spesialisasi:</label><br />
      <input
        type="text"
        id="spesialisasi"
        name="spesialisasi"
        required
      /><br /><br />

      <label for="jadwal_praktek">Jadwal Praktek:</label><br />
      <input
        type="text"
        id="jadwal_praktek"
        name="jadwal_praktek"
        required
      /><br /><br />

      <label for="info_klinik">Info Klinik:</label><br />
      <input
        type="text"
        id="info_klinik"
        name="info_klinik"
        required
      /><br /><br />

      <label for="img_dokter">Upload Foto Dokter:</label><br />
      <input
        type="file"
        id="img_dokter"
        name="img_dokter"
        accept="image/*"
        required
      /><br /><br />

      <input type="submit" value="Submit" />
    </form>

    <script>
      document
        .getElementById("doctorForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          const formData = new FormData();
          const fileField = document.querySelector('input[type="file"]');

          formData.append("img_dokter", fileField.files[0]);
          formData.append(
            "nama_dokter",
            document.getElementById("nama_dokter").value
          );
          formData.append(
            "spesialisasi",
            document.getElementById("spesialisasi").value
          );
          formData.append(
            "jadwal_praktek",
            document.getElementById("jadwal_praktek").value
          );
          formData.append(
            "info_klinik",
            document.getElementById("info_klinik").value
          );

          try {
            const response = await fetch("http://localhost:3000/api/dokter", {
              method: "POST",
              body: formData,
            });

            const data = await response.json();
            console.log(data);
          } catch (error) {
            console.error("Error:", error);
          }
        });
    </script>
  </body>
</html>
